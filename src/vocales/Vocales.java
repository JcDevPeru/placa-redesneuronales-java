/*
 *@autor Jean Carlos
 * Red MLF para reconocer digitos
 */
package vocales;

import java.io.IOException;
import javax.swing.JOptionPane;

/**
 *
 * @author Ev
 */
public class Vocales {
    
String letra="";
String placa ="";
    public void analizar(int[][] patron){
       
        int filas_entrada = 7;
        int col_entrada = 5;
        int neuronas_entrada = 36;
        int neuronas_oculta = 10;
        int neuronas_salida = 36;
        int i, j, k;
        
        
        double[][] pesos_entrada_oculta = {
            {-1.0087422949626064,-7.35558205861505,-0.16856551065138994,-10.519442141780084,2.8816350330041773,6.296948795258788,13.041232250764985,-4.032480229763019,-7.267136401970696,-0.7978739757888615},
{-8.72189100963689,-3.148183414583783,-3.717275804841009,2.099902196126021,5.6500983011451025,4.775098619494742,-0.6181206367384007,1.7020835654206543,5.5451602953172285,6.088120564909979},
{-4.583301482948922,-1.5468408596325383,-2.5760117389749984,3.554852311108567,1.9911411330147784,0.5673057737588574,-1.0730238605705154,3.5352639096622336,4.66778112053863,6.33951597411203},
{-3.7722199723513388,-0.35967116247080927,-0.1863633942226789,4.193345079487366,4.361045328684371,3.2244118420780086,-3.069623461234357,3.661315525754977,5.085126014878359,5.025868148916322},
{-1.5523151406343212,-6.744499170065366,-2.6883934655532333,-1.1107649329781684,2.9561712072192257,4.7970699588846895,8.211213940407788,-3.4313009568364214,-10.217165077447929,-1.4821959013256203},
{-5.427999297306016,-3.2538522066706617,1.4333482229261345,-1.2041913177449377,2.7005984759047674,-3.247344047095825,1.7851860034434348,-3.379032011470498,-0.5404684393482374,-1.101571231921889},
{12.821136031687324,2.2459604785501934,0.03599400492971733,5.735043848250005,-10.655561653353391,1.6979595762001507,-0.2714758040163455,0.43496900911888914,-5.13793352723782,0.8762636425400206},
{-2.8889052007394134,5.594924681418758,-2.6289402937493116,3.6676294109038117,2.896921148588881,-5.883467540628393,-1.7975790068338817,2.646371577236912,-1.9144292436141508,-1.2830193718843237},
{16.125228698909286,-2.399776362013429,1.2915552066029325,1.5171691502964386,-3.560665603726455,6.343936814682386,0.5540569938086919,-5.068834405383308,-0.09205803796512851,-2.947108647112405},
{-5.226193007574279,-0.8069598751235549,-2.406393265054477,-5.98394063968046,-4.973698994564432,2.5162121435340694,2.8743525594477592,-1.8604624355285795,10.585350209361582,-2.166308284907304},
{0.07093329274702219,0.5592606890290943,6.4838109895527,-0.553283793284037,0.45045585908541347,-2.9776366811355865,-0.46662852260682025,0.2976519862208289,-2.484536025215334,-0.02222184393917257},
{-1.0266222478652027,1.30364663866381,-1.5918855822640166,3.976217308447646,4.160340434727134,-8.456834983217936,1.0427769091184993,-2.6556320467734693,-1.6491614082272974,-3.8572121469554093},
{0.4939535409961768,-2.959357292732366,-7.189910042806144,9.943986921670703,-2.723033720168351,4.077394964813507,2.5086595583019826,-2.239267254737271,-7.503590313669928,-0.59897080986575},
{-0.7683496685151243,4.651016342772346,-0.7329402953972814,-6.237747676357761,8.840436499895421,-9.209161458658523,2.639762140977026,-3.32074173318244,4.088889610150332,-1.5853475849896213},
{-5.624958560286745,-1.0216007465042802,-0.19895824536604764,-3.101696372832987,-6.5152785474560195,3.6789967758424456,1.6970736443451002,-1.1107487129681723,9.434261806598435,-1.7009149151234837},
{3.5796267428787023,1.1377808953468738,17.788741528535326,-0.6216212569004353,2.0828647614100317,-0.9478056561366778,-0.6410275108517243,-1.4354737430775488,-2.547554171029281,-0.3032765247413648},
{4.806409968971979,-1.96829449141373,0.8260424298630167,-5.310213409869854,-3.4342345211868053,0.9293016562431965,-1.277791974584205,14.939036452144789,-1.661965016232024,-1.6342260066628935},
{-0.32818240542383265,3.9810438183516657,-2.504051855145675,-8.59427493392384,1.422656294537613,-3.722104103153049,1.1602915501048627,11.503801947415473,-0.22072465925372747,-1.7926031715560773},
{-7.0495004378749595,-0.0364847186311659,0.49930665944995384,4.905886980846161,-6.854370825568248,7.540183380389003,-2.732329816051166,10.950695292197887,-3.9776590351981924,-0.3625765070256118},
{-12.038726422952525,-0.6280830056193928,4.3975100364949125,4.173828760000171,-4.042718597434214,-5.63099626498543,4.631959380737858,-2.5724072275157686,-0.5998956709700451,-1.8580641004650866},
{2.195473074027124,5.0535865654552365,10.607824326333906,-1.8205123357287354,3.0586353830233413,-1.925269692192016,-2.2881673621625676,0.8960594236784165,-0.23850132648401626,2.5473007270614203},
{2.253503158983161,5.4651922337268575,1.8883527482111644,-8.87868626877773,7.271115464719497,-5.946170752498507,1.5628964892490467,-1.8583189208117314,6.159379024604294,-2.5204345460545245},
{1.5955258232099545,-0.36879937285701353,-3.6959529229802475,10.647133185472336,8.753758463041258,2.2438960340749468,-2.1641441102212453,0.5732042371725785,3.231236303699311,-5.038819202179783},
{1.9492515584535355,2.031440526035447,0.8253050703092573,0.946864362026325,1.8222586871502804,-5.021065750721051,-0.18505329485271732,-1.235755794703772,-0.07554594941442876,-5.314809435139876},
{-5.195542479578955,1.4066108864305182,2.225556388306742,4.792635497741597,-8.606893314493114,-3.8871881648146096,1.3955108729596126,0.01852311721749372,-0.6689972515137512,-0.07995314559269232},
{0.46303653473571854,-2.548978774419068,5.267220909847781,-2.427338072876775,3.692057208023392,-3.1687983082622995,-1.0204291398184038,-0.045340742300322215,-2.096467525838686,5.759918771287327},
{-5.08908884965122,2.921946422888133,-2.6855448375417876,-0.14166608962277183,2.258266246592392,6.886824721840543,3.018563246357107,-8.17316470128932,5.081494501614387,-1.3118955599851652},
{-1.060980397234673,3.5019713949344204,-6.255712815439888,1.6904633160773817,-1.1670463524785855,-0.42421048655544535,1.4251380552967472,2.400794506397637,-2.9051364396388,-1.3669510150367068},
{0.6448236613527042,6.150852975155411,2.7599111721259337,6.4273386663128615,7.320699243066265,5.308692298133798,-2.237892662984598,-2.8803770529544006,5.570198145451125,-9.657253876060667},
{-5.640122394589603,-4.515562409740499,0.6775500578493243,2.2071253679261016,-6.518870675651909,-7.6960112674884495,2.7704046128790685,0.6352078779644638,-4.692140758568488,1.5138906989500034},
{-0.09051534681241855,-18.680690454874885,0.5813856363304281,-1.6362062743283237,3.2577789336390257,-1.74450599820776,1.7985704612826043,5.428791664579756,2.096138458610735,-0.25636612860935193},
{2.5945450007188904,3.536891808540899,-5.302906560112383,-0.5519609189799721,-1.953668193034779,-2.827267088130182,0.876919191254012,-3.913553174393889,0.42326636383171296,11.91154270728121},
{0.19536063967014977,1.3523265792717694,-5.091797750553583,0.20452234571301522,-3.4035064780390054,-1.997109102806549,2.687963718351169,-0.9206615384131723,-2.4800872552598077,5.774782048612688},
{7.6927325657927605,-1.6174650925285985,-1.2878828683380714,-0.858511580830661,-2.351089339646876,-9.407439279017016,1.4128978782684924,-2.934934211073749,-4.40631021543463,11.021113268590737},
{5.610863716185643,-9.108947599944338,1.5323770172822282,11.585472848837433,6.312887699501696,-4.553276450900097,-3.923216977407866,1.3331683114802646,3.65789995016704,-3.2834963124854046},
{0.10044350355612808,0.8616207468082361,-0.4335030858301156,0.05613111058017572,-0.2620571640023918,0.08343014014510378,0.21641572094943767,-0.41138555423946443,-0.15577465770927745,-0.16459988404371237}};
        
        
        double[][] pesos_oculta_salida = {
            {-4.61342793990392,5.545191063058404,-2.24411961832367,0.08961071796751423,3.774570460556061,-5.2915372826041756,6.304979885261761,-3.139348343907488,-1.877639113456617,-5.424250980755767,-3.924366821540901,-3.839322591987405,3.906518079578762,-3.824468955991649,5.076317733729319,-3.4616001286961655,-7.350689851410272,-2.6194689893052425,0.37800335993152123,-1.7091179820535256,5.421567194446212,5.663536491191917,6.294989067585392,-7.704224295370078,-2.354171991777627,-1.192297055997497,-4.381902863044141,0.6548560859750314,-2.5408418961073056,-5.698283845054432,-2.239262525291321,-4.28516414409326,-5.51886937760465,0.17510016171836973,5.389183903979755,1.529379318145851},
{4.988419915290707,5.182318012921608,-5.95695178698321,-5.398819814782459,8.308538515176341,-2.0377965908612405,3.2547309191835465,4.0745396575575885,4.072184042946848,4.671320382776707,-5.259274225366423,-5.014213134464519,-1.5856982662090784,-9.763779550519414,-8.43690145946486,-5.024454482515354,3.0025560783328,-6.820922038073347,5.705662570923785,5.2180986710548,-6.414605095003941,3.725144855944735,-5.627801915321144,-6.5328912010992894,3.2499177065443545,0.16522448179317722,3.448695363009021,-1.5124277217341564,-4.814116950011265,2.029005197612885,0.4041913875970553,4.853221408366063,-5.951499615494462,-3.7284877423800262,1.195668836450318,-6.9617691208166725},
{5.125380062107709,-12.7542347179089,-11.432972196432164,-4.339184445513029,4.471954215025011,-5.686569570506272,5.482564800153659,-7.564071112263611,-4.127423621221858,-5.724879992977791,5.021454810852759,3.3659821529619927,1.8935205922853904,2.245146404644144,2.239376324513118,3.872799668761314,3.8881234019558955,4.043723251038746,-6.797710600162018,-3.7799034299813576,3.282698470778375,3.248498237751367,2.2267875111952478,3.0527346947927874,1.6282719399900805,3.8464021675135442,1.618853611276564,2.5468873353475607,-7.050800869053442,-7.907901968364713,4.038476725452962,3.29726492177408,4.8462635366909605,-3.997572560255783,-7.215045193590384,-8.666283966608368},
{-7.6230584984667065,0.7501671702071556,4.867030909097671,1.6128635969457892,1.9330222721441106,1.5611726064582294,-0.006788291432976161,-8.576210950715833,-3.3164441968487965,1.2804558880339345,3.349495899676003,-5.026416293210214,6.522080366081481,-1.5419626563301034,-1.1897359856389826,-4.365343372248415,4.744172379670212,-4.244752926737437,3.4300600416187543,2.72746336538201,1.3656100314684045,-6.034418329850383,0.26237145109365323,6.053410298061289,4.634971847785433,-9.771546042100839,7.080597225440155,3.114009321709514,0.5066174177701008,1.0975413780456469,-3.336467510533446,-3.4528916854857066,1.5699294218947049,-4.58703113221741,-1.3998604091829925,-5.460951334959992},
{2.845803594515032,-3.6162413232744477,0.08386016329806255,-4.632241067204785,2.7035289029107363,1.6113053954437977,-7.195475021383717,2.8574595016846938,-6.614704753390367,-7.255866667054839,-5.728022093813953,-9.671883334308367,5.513218475173578,-3.4557670595271404,3.978909153015473,4.751454995060211,-0.8052597301832636,-4.837882814900886,0.6040859688230876,6.435992648583114,7.127101279940216,1.6451103804667515,-5.420608433717199,-6.0158200650090246,-8.09043169285686,-0.25527941763829104,4.670835967333774,5.356797071659441,-4.495115661578191,5.851979721547963,-9.82305659566465,-3.707229733031453,3.7456876901554845,3.053034688977419,-3.370150585619749,4.065971700883613},
{-9.764069774686286,-4.527588368532817,2.6251231716170884,6.243129107788496,-5.995925637047559,-7.81313477434607,-2.571850902985381,3.5483693863204993,-1.885721846724669,3.7819150460795923,-4.414546652302167,-0.4546553593504452,-1.2247125787282864,-1.1437074925224961,-1.9137916866398417,5.6136573019956275,-4.008613381967494,-2.3895423216725677,-5.18409596637237,-1.6371517754553415,3.218910079191743,-1.8514802408081974,-2.09501659245263,1.2651994044710515,-2.4264874439916784,2.804076877421407,-0.4262407674224683,2.67139594226823,-4.500057643349716,6.0414665398157625,-4.214412405598061,3.5746671857450423,0.22965548125912386,-10.196552086980084,5.222122206177141,-2.7427918953514303},
{-4.248254819045257,-4.101672752049972,-5.108205889101239,-1.7668951940576418,-8.676019104345423,2.2212395516935217,-7.913475597145029,1.9028781869962306,-6.579914914259425,-3.230001682925292,-6.706344289696103,-1.6802517280912925,-10.877276063868473,1.0501991145248963,-6.735712301396842,-5.552931853068922,-7.960705029139235,2.3082784402267342,-2.0883254736542054,-11.286158242557892,-5.644713661072752,-3.64536807725316,1.8408033356496274,0.11653890337397228,-5.495468455791958,-7.7321779109054525,-10.339652549799295,-9.393381914590757,-3.5423618305750173,-2.5244833513495393,4.01766883154385,1.6864791443874672,-0.5834522675529885,5.04020664641644,1.465231623016496,-1.4931587102067165},
{-0.9109031419195696,-0.7528597127333728,-1.3925559608779896,-3.8798482125355465,-2.999343280305757,-9.010486984263386,4.655551366357456,-6.298523390782939,3.2962913701907275,2.4613474272717863,4.857539017519048,5.2474203653448805,-6.823021137487973,-7.964389017252136,3.275340833829832,3.3181432498508716,3.673443276195239,5.868718271676625,3.123609325014485,3.7586580449396148,-0.8673897516636304,-6.1229317805678285,-9.757493660115342,-2.5846791764146504,-4.757473356022816,5.052211426607439,-3.938417932408405,6.684109224261454,7.659544946829199,2.1627902796298764,-10.673132801618372,-6.960687442006748,-8.582044627060768,-2.513332064390019,-2.9005801808858354,-0.26410558576728177},
{4.135670111184991,-4.700450826448809,7.35830428486739,-5.452500007844252,0.8249463485794861,-4.765224797216545,-7.039117440480512,2.875354896950412,3.4714042921947983,5.570332628474009,7.129360680163726,0.08020874731913377,-1.0648398246216246,5.220707391103218,-2.703178113786715,-5.703953591016423,-4.163068534439103,-3.7185494445850757,-1.0156698604676317,0.5335877467003516,-5.94892558462604,-7.019719904054645,-1.4145146118813694,-7.4659527064654565,4.5182514744388,7.76464917012203,6.48968646652072,4.550488782115311,-6.644027076099387,-6.8110889203482206,-8.181725947314291,0.9460543247541433,3.396216359020519,-2.2532987137079132,-5.609493576836865,2.6917019640106234},
{0.8862744101110338,4.252362149566549,1.1721778321819698,6.047459510063115,-7.2497870306871315,4.463855092973642,3.121456952817173,-1.2115211304213662,7.7906456641706745,-5.687144440112462,-3.0604419620685497,6.479297937024739,6.756562165710033,5.80730769288993,5.000177796191942,-0.07214934306363695,4.558865725191204,-8.244515112033282,-8.837961721910778,6.873053885369782,-6.641835991586999,2.6248349465829492,-3.7177516370029995,-2.855124386516745,6.491545854172034,-2.226820521294491,-0.03277041630208121,-7.212599501984083,3.8973338036095613,-2.39978524166958,2.67840699973493,-9.497244421675903,-8.618652504678773,-8.428142956559066,-7.964190619809502,4.492815674307961}
};
        
        
        
        double[] bias_entrada = {
            -0.7635199730461871,
            -0.8788776106209123,
            -2.18631058876841,
            -1.4289175858969705,
            -0.9372318726299634,
            -3.272911687102761,
            -1.55244498890454,
            -1.5351803351218922,
            -0.878932243663586,
            -0.9793362795637347,
            -3.477385852583637,
            -2.7494592255036596,
            -2.944853048950622,
            -1.095713141971576,
            -1.354956217219062,
            -1.0392617498197276,
            -0.8555570144659563,
            -1.1410489469562453,
            -0.4745955030775232,
            -0.729416838586143,
            -1.6077731545978313,
            -1.4481172314837683,
            -2.5546538936957024,
            -1.857167251234841,
            -3.271969446802645,
            -2.2775584501629806,
            -1.8460731261498093,
            -1.812017093243803,
            -0.711729939952172,
            -1.1768344178591812,
            -1.2072236713578646,
            -0.9526684638786772,
            -2.617952100213586,
            -0.7292767849084597,
            -0.9001678003467734,
            -3.6772932821977964
        };
        double[] bias_oculta = {
        3.3199147976766192,
        9.731978283629438,
        -3.884568048678403,
        -0.34948565938897935,
        -2.519347326278998,
        1.3846835516349003,
        4.867737224717927,
        -6.096841572138128,
        -2.7978648489026443,
        -3.982028456224515};
        
        double[] bias_salida = {
            -8.809955911394137,
-5.637509053851288,
-4.794517227776897,
-5.102033599793248,
-7.832087519263388,
-3.641207027281911,
-10.57843172497522,
-8.18885735546235,
-5.885012945018609,
-6.28711964970798,
-6.426994496104631,
-9.33843484977712,
-8.212807151259968,
-7.585105031080334,
-8.133014141944777,
-7.049428932103777,
-6.788035361811756,
-6.8810425978116365,
-5.215214920082119,
-8.643078715809073,
-9.607321399719403,
-8.317986367155699,
-5.12433378163617,
-4.066870971612481,
-8.318916040250757,
-6.339805297593144,
-8.812267893463057,
-10.912848640611967,
-2.060772727291925,
-7.4801865540409285,
-5.970345467050101,
-6.217883364385065,
-7.141774300556644,
-1.7513261516655674,
-5.757767687540769,
-5.769891752862566};
        
        int[] entrada = new int[neuronas_entrada];
        double[] sumatoria_entrada = new double[neuronas_entrada];
        double[] sigmoidal_entrada = new double[neuronas_entrada];
        
        double[] oculta = new double[neuronas_oculta];
        double[] sumatoria_oculta = new double[neuronas_oculta];
        double[] sigmoidal_oculta = new double[neuronas_oculta];
        
        double[] salida = new double[neuronas_salida];
        double[] sumatoria_salida = new double[neuronas_salida];
        double[] sigmoidal_salida = new double[neuronas_salida];


        //1. procesamiento de la capa de entrada
        //1.1 linealizar el patron de entrada
        for (i = 0; i < filas_entrada; i++) {
            for (j = 0; j < col_entrada; j++) {
                
                entrada[i * col_entrada + j] = patron[i][j];
            }
        }

        //1.2 sumar la entrada con el bias y calcular sigmidal
        for (i = 0; i < neuronas_entrada; i++) {
            sumatoria_entrada[i] = entrada[i] + bias_entrada[i];
            sigmoidal_entrada[i] = 1 / (1 + Math.exp(-1 * sumatoria_entrada[i]));
        }
        //2. procesamiento de la capa oculta
        // 2.1 sumatoria de productos de entrada por peso
        for (j = 0; j < neuronas_oculta; j++) {
            oculta[j] = 0;
            for (i = 0; i < neuronas_entrada; i++) {
                oculta[j] += sigmoidal_entrada[i] * pesos_entrada_oculta[i][j];
            }
        }
        //2.2 sumatoria mas bias y calculo de sigmoidal
        for (i = 0; i < neuronas_oculta; i++) {
            sumatoria_oculta[i] = oculta[i] + bias_oculta[i];
            sigmoidal_oculta[i] = 1 / (1 + Math.exp(-1 * sumatoria_oculta[i]));
        }

        //3. procesamiento de la capa salida
        //3.1 suamtoria de productos de salida x peso
        for (j = 0; j < neuronas_salida; j++) {
            salida[j] = 0;
            for (i = 0; i < neuronas_oculta; i++) {
                salida[j] += sigmoidal_oculta[i] * pesos_oculta_salida[i][j];
            }
        }
        //3.2 sumatoria mas bias y calculo de sigmoidal
        for (i = 0; i < neuronas_salida; i++) {
            sumatoria_salida[i] = salida[i] + bias_salida[i];
            sigmoidal_salida[i] = 1 / (1 + Math.exp(-1 * sumatoria_salida[i]));
            if(sigmoidal_salida[i]>0.80)
            {
                //System.out.println("Sigmoidal [" + i + "]- " + sigmoidal_salida[i]);
            }
            //System.out.println("Sigmoidal [" + i + "]- " + sigmoidal_salida[i]);
        }
        // 4.construyendo la interface de salida
        double mayor = -0.999;
        int neurona_activada = -1;
        for (i = 0; i < neuronas_salida; i++) {
            if (sigmoidal_salida[i] > mayor) {
                
                mayor = sigmoidal_salida[i];
                neurona_activada = i;
            }
        }
        
        if (mayor > 0.80 ) {
            // heuristica para saber si el patron es coherente
            switch (neurona_activada) {
                case 0:
                    letra="0";
                    break;
                case 1:
                    letra="1";
                    break;
                case 2:
                    letra="2";
                    break;
                case 3:
                    letra="3";
                    break;
                case 4:
                    letra="4";
                    break;
                case 5:
                    letra="5";
                    break;
                case 6:
                    letra="6";
                    break;
                case 7:
                    letra="7";
                    break;   
                case 8:
                    letra="8";
                    break;
                case 9:
                    letra="9";
                    break;
                case 10:
                    letra="A";
                    break;
                case 11:
                    letra="B";
                    break;
                case 12:
                    letra="C";
                    break;
                case 13:
                    letra="D";
                    break;
                case 14:
                    letra="E";
                    break;
                case 15:
                    letra="F";
                    break;
                case 16:
                    letra="G";
                    break;
                case 17:
                    letra="H";
                    break;
                case 18:
                    letra="I";
                    break;
                case 19:
                    letra="J";
                    break;
                case 20:
                    letra="K";
                    break;
                case 21:
                    letra="L";
                    break;
                case 22:
                    letra="M";
                    break;
                case 23:
                    letra="N";
                    break;
                case 24:
                    letra="O";
                    break;
                case 25:
                    letra="P";
                    break;
                case 26:
                    letra="Q";
                    break;
                case 27:
                    letra="R";
                    break;
                case 28:
                    letra="S";
                    break;
                case 29:
                    letra="T";
                    break;
                case 30:
                    letra="U";
                    break;
                case 31:
                    letra="V";
                    break;
                case 32:
                    letra="W";
                    break;
                case 33:
                    letra="X";
                    break;
                case 34:
                    letra="Y";
                    break;
                case 35:
                    letra="Z";
                    break;
            }
        } else
        {
            letra="*";
            //System.out.println("No reconozco la letra "+letra);
            //JOptionPane.showMessageDialog(null, "No reconcosco la vocal");
        }
    }
    public  String getPlaca(){
        for(int i=0;i<1;i++){
            placa = placa +letra;
        }
        return placa;
    }
    }
    

